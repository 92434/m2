name: Simple Debug
on: [workflow_dispatch]

jobs:
  debug:
    runs-on: ubuntu-latest
    timeout-minutes: 20
    
    steps:
      - name: ‚è±Ô∏è Set timezone
        run: sudo timedatectl set-timezone "Asia/Shanghai"

      - name: üì¶ Checkout code
        uses: actions/checkout@v4

      - name: üìã System Information
        run: |
          echo "=== SYSTEM INFO ==="
          echo "Hostname: $(hostname)"
          echo "OS: $(lsb_release -d | cut -f2)"
          echo "Kernel: $(uname -r)"
          echo "CPU: $(nproc) cores"
          echo "Memory: $(free -h | grep Mem | awk '{print $2}')"
          echo "Disk: $(df -h / | tail -1 | awk '{print $4 " free"}')"
          echo "=================="

      - name: üõ†Ô∏è Install Debug Tools
        run: |
          echo "üì• Installing debug tools..."
          sudo apt-get update
          sudo apt-get install -y vim nano htop iotop net-tools dnsutils curl wget git
          echo "‚úÖ Debug tools installed"

      - name: Setup Official Debug Session
        uses: mxschmitt/action-tmate@v3
        timeout-minutes: 15
        with:
          detached: false
          limit-access-to-actor: true

      - name: üìä Session Summary
        if: always()
        run: |
          echo "===================================="
          echo "üêõ DEBUG SESSION COMPLETED"
          echo "===================================="
          echo "Status: ${{ job.status }}"
          echo "Runner: ${{ runner.name }}"
          echo "Workspace: ${{ github.workspace }}"
          echo "Completion: $(date)"
          echo "===================================="
